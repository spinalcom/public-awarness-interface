{"version":3,"sources":["components/RegisterForm.vue","components/RequestUserInformation.vue","views/Login.vue","../../../../../../../usr/local/lib/node_modules/parcel/src/builtins/bundle-url.js","../../../../../../../usr/local/lib/node_modules/parcel/src/builtins/bundle-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","require","loadBundlesLazy","bundles","Array","isArray","id","length","Promise","resolve","code","LazyPromise","reject","loadBundles","slice","then","all","map","loadBundle","bundleLoaders","registerBundleLoader","type","loader","module","load","register","bundle","substring","lastIndexOf","toLowerCase","bundleLoader","resolved","catch","e","executor","promise","prototype","onSuccess","onError"],"mappings":"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","file":"Login.333bd367.js","sourceRoot":"../src","sourcesContent":["<template>\n    <v-card min-width=\"350\" max-width=\"420\" dark>\n        <v-card-title>\n            Découvrez le projet de deconstruction de la raffinerie\n        </v-card-title>\n        <v-card-text>\n            <h4>\n                <p>\n                    Bienvenue sur le site de visualisation du démantèlement de\n                    la\n                    raffinerie de Dunkerque\n                </p>\n                <p>\n                    Afin de visualiser l'avancement du démantèlement veuillez\n                    compléter le\n                    formulaire suivant\n                </p>\n            </h4>\n\n\n            <v-text-field\n                    label=\"E-mail\"\n                    :rules=\"[rules.email]\"\n                    placeholder=\"Placeholder\"\n                    outlined\n                    type=\"email\"\n                    v-model=\"email\"\n            ></v-text-field>\n            <v-text-field\n                    label=\"Code postal\"\n                    placeholder=\"Placeholder\"\n                    :rules=\"[rules.zip]\"\n                    outlined\n                    v-model=\"zipCode\"\n            ></v-text-field>\n            <v-checkbox\n                    v-model=\"optIn\"\n                    label=\"J’accepte de recevoir des informations par email\"\n                    :color=\"color\"\n            >\n            </v-checkbox>\n            <v-checkbox\n                    v-model=\"cgu\"\n                    :color=\"color\"\n            >\n                <template v-slot:label>\n                    <div>\n                        Accepter les\n                        <a  class=\"link\"\n                                target=\"_blank\"\n                                href=\"http://google.com\"\n                                @click.stop\n\n                        >\n                            CGU\n                        </a>\n                    </div>\n                </template>\n            </v-checkbox>\n            <p\n                    class=\"error--text\"\n                    v-if=\"displayError\">\n                les CGU doivent etre accepter\n            </p>\n        </v-card-text>\n        <v-card-actions>\n            <v-spacer></v-spacer>\n\n            <v-btn :color=\"color\"\n                   light\n                   @click=\"save\">\n                Valider\n            </v-btn>\n        </v-card-actions>\n    </v-card>\n\n</template>\n\n<script>\n  export default {\n    name: 'Register form',\n    data() {\n      return {\n        optIn: true,\n        cgu: false,\n        email: '',\n        zipCode: 59140,\n        rules: {\n          email: ( value ) => {\n            const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n            return pattern.test( value ) || 'Invalid e-mail.';\n          },\n          // eslint-disable-next-line no-restricted-globals\n          zip: value => (value.length === 5 && !(isNaN( value ))) ||\n            'Code postal invalide',\n        },\n        notSaved: true,\n        color: 'rgba(246, 226, 0,1)',\n      };\n    },\n    computed: {\n      displayError() {\n        if (this.notSaved) return false;\n        return !(this.cgu && this.email !== '' && this.zipCode !== -1);\n      },\n    },\n    methods: {\n\n      validate() {\n        return this.cgu && this.email !== '' && this.zipCode !== -1;\n      },\n      save() {\n        this.notSaved = false;\n\n        if (!this.validate()) return;\n        const event = {};\n        event.cgu = this.cgu;\n        event.email = this.email;\n        event.zipCode = this.zipCode;\n        event.optIn = this.optIn;\n        console.log( event )\n        this.$emit( 'saved', event );\n      },\n    },\n  };\n</script>\n\n<style scoped>\n.link{\n    color: rgba(246, 226, 0,1);\n}\n</style>\n","<template>\n  <div class=\"card\"\n  >\n    <div class=\"body\">\n      <p>\n        Bienvenue sur le site de visualisation du démantèlement de la\n        raffinerie de Dunkerque\n      </p>\n      <p>\n        Afin de visualiser l'avancement du démantèlement veuillez compléter le\n        formulaire suivant\n      </p>\n    </div>\n    <div class=\"footer\">\n\n        <v-btn  @click=\"$emit('leave')\"> Quitter</v-btn>\n        <v-btn\n               color=\"rgba(254,235,52,1)\"\n               @click=\"$emit('agreed')\"> Visualiser</v-btn>\n      \n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'RequestUserInformation',\n  };\n</script>\n\n<style scoped>\n  .card{\n    width: 75%;\n    height: 100%;\n    background: rgba(216,216,216,100);\n    border-radius: 1%;\n    box-shadow: 5px 5px 6px 0 rgba(0,0,0,0.5);\n    border: 1px solid rgba(0,0,0,0.50);\n    padding: 3%;\n    position: relative;\n  }\n\n  .footer{\n    position: absolute;\n    padding-bottom: 5%;\n    bottom: 0;\n    left: 60%;\n  }\n\n  .body{\n    position: absolute;\n    top: 20%;\n    left: 25%;\n    width: 50%;\n  }\n</style>\n","<template>\n    <div class=\"background\">\n        <!--<request-user-information\n                @agreed=\"agreed = true\"\n                @leave=\"redirectToGoogle\"\n        ></request-user-information>-->\n        <register-form\n                class=\"center\"\n                @saved=\"register\"\n        ></register-form>\n\n    </div>\n</template>\n\n<script>\n  import RegisterForm from '../components/RegisterForm.vue';\n  import RequestUserInformation from '../components/RequestUserInformation.vue';\n\n  export default {\n    name: 'Login',\n    components: { RequestUserInformation, RegisterForm },\n    data() {\n      return {\n        agreed: false,\n        user: {\n          email: '',\n          zipCode: -1,\n          cgu: false,\n          partner: false,\n        },\n        userAlreadyExist: false\n      };\n    },\n\n    methods: {\n      redirectToGoogle() {\n        window.location.href = 'https://google.fr';\n      },\n      register( info ) {\n        this.$userManager\n          .register( info.email, info.zipCode )\n          .then( ( user ) => {\n            if (typeof user !== 'undefined') {\n              this.redirectToMainPage( user )\n            } else {\n              this.$userManager.getUserByEmail( info.email )\n                .then(() =>  this.redirectToMainPage( user ))\n            }\n          } ).catch( console.error );\n      },\n      redirectToMainPage( user ) {\n        if (typeof user !== \"undefined\") {\n          this.$cookies.set( 'user', user.info.id.get(), null, '/' );\n          this.$router.push( '/' )\n        }\n      }\n    },\n    mounted() {\n\n      const cookie = window.$cookies.get( 'user' );\n      if ((typeof cookie !== 'undefined' || cookie !== null)) {\n        this.$userManager.connect( cookie )\n          .then( ( res ) => {\n            if (res) this.$router.push( '/' );\n          } );\n      }\n    },\n  };\n</script>\n\n<style scoped>\n    .background {\n        background-image: url(../assets/colas.jpg);\n        background-repeat: no-repeat, no-repeat;\n        background-size: cover;\n        width: 100%;\n        height: 100%;\n    }\n\n    .center {\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        -webkit-transform: translate(-50%, -50%);\n        -moz-transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n        -o-transform: translate(-50%, -50%);\n        transform: translate(-50%, -50%);\n    }\n\n</style>\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n"]}